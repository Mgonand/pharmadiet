!function(){var a=!1,b=/xyz/.test(function(){})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(c){function d(){!a&&this.init&&this.init.apply(this,arguments)}var e=this.prototype;a=!0;var f=new this;a=!1;for(var g in c)f[g]="function"==typeof c[g]&&"function"==typeof e[g]&&b.test(c[g])?function(a,b){return function(){var c=this._super;this._super=e[a];var d=b.apply(this,arguments);return this._super=c,d}}(g,c[g]):c[g];return d.prototype=f,d.prototype.constructor=d,d.extend=arguments.callee,d}}(),function(a){var b={trace:function(b){void 0!==a.console&&a.console.log("Porthole: "+b)},error:function(b){void 0!==a.console&&a.console.error("Porthole: "+b)}};b.WindowProxy=function(){},b.WindowProxy.prototype={post:function(){},addEventListener:function(){},removeEventListener:function(){}},b.WindowProxyBase=Class.extend({init:function(b){void 0===b&&(b=""),this.targetWindowName=b,this.origin=a.location.protocol+"//"+a.location.host,this.eventListeners=[]},getTargetWindowName:function(){return this.targetWindowName},getOrigin:function(){return this.origin},getTargetWindow:function(){return b.WindowProxy.getTargetWindow(this.targetWindowName)},post:function(b,c){void 0===c&&(c="*"),this.dispatchMessage({data:b,sourceOrigin:this.getOrigin(),targetOrigin:c,sourceWindowName:a.name,targetWindowName:this.getTargetWindowName()})},addEventListener:function(a){return this.eventListeners.push(a),a},removeEventListener:function(a){var b;try{b=this.eventListeners.indexOf(a),this.eventListeners.splice(b,1)}catch(c){this.eventListeners=[]}},dispatchEvent:function(a){var b;for(b=0;b<this.eventListeners.length;b++)try{this.eventListeners[b](a)}catch(c){}}}),b.WindowProxyLegacy=b.WindowProxyBase.extend({init:function(a,b){if(this._super(b),null===a)throw this.proxyIFrameElement=null,new Error("proxyIFrameUrl can't be null");this.proxyIFrameName=this.targetWindowName+"ProxyIFrame",this.proxyIFrameLocation=a,this.proxyIFrameElement=this.createIFrameProxy()},createIFrameProxy:function(){var a=document.createElement("iframe");return a.setAttribute("id",this.proxyIFrameName),a.setAttribute("name",this.proxyIFrameName),a.setAttribute("src",this.proxyIFrameLocation),a.setAttribute("frameBorder","1"),a.setAttribute("scrolling","auto"),a.setAttribute("width",30),a.setAttribute("height",30),a.setAttribute("style","position: absolute; left: -100px; top:0px;"),a.style.setAttribute&&a.style.setAttribute("cssText","position: absolute; left: -100px; top:0px;"),document.body.appendChild(a),a},dispatchMessage:function(c){var d=a.encodeURIComponent;if(this.proxyIFrameElement){var e=this.proxyIFrameLocation+"#"+d(b.WindowProxy.serialize(c));this.proxyIFrameElement.setAttribute("src",e),this.proxyIFrameElement.height=this.proxyIFrameElement.height>50?50:100}}}),b.WindowProxyHTML5=b.WindowProxyBase.extend({init:function(a,b){this._super(b),this.eventListenerCallback=null},dispatchMessage:function(a){this.getTargetWindow().postMessage(b.WindowProxy.serialize(a),a.targetOrigin)},addEventListener:function(b){if(0===this.eventListeners.length){var c=this;this.eventListenerCallback=function(a){c.eventListener(c,a)},a.addEventListener("message",this.eventListenerCallback,!1)}return this._super(b)},removeEventListener:function(b){this._super(b),0===this.eventListeners.length&&(a.removeEventListener("message",this.eventListenerCallback),this.eventListenerCallback=null)},eventListener:function(a,c){var d=b.WindowProxy.unserialize(c.data);!d||""!=a.targetWindowName&&d.sourceWindowName!=a.targetWindowName||a.dispatchEvent(new b.MessageEvent(d.data,c.origin,a))}}),"function"!=typeof a.postMessage?(b.trace("Using legacy browser support"),b.WindowProxy=b.WindowProxyLegacy.extend({})):(b.trace("Using built-in browser support"),b.WindowProxy=b.WindowProxyHTML5.extend({})),b.WindowProxy.serialize=function(a){if("undefined"==typeof JSON)throw new Error("Porthole serialization depends on JSON!");return JSON.stringify(a)},b.WindowProxy.unserialize=function(a){if("undefined"==typeof JSON)throw new Error("Porthole unserialization dependens on JSON!");try{var b=JSON.parse(a)}catch(c){return!1}return b},b.WindowProxy.getTargetWindow=function(b){return""===b?top:"top"===b||"parent"===b?a[b]:parent.frames[b]},b.MessageEvent=function(a,b,c){this.data=a,this.origin=b,this.source=c},b.WindowProxyDispatcher={forwardMessageEvent:function(){var c,d,e,f=a.decodeURIComponent;document.location.hash.length>0&&(c=b.WindowProxy.unserialize(f(document.location.hash.substr(1))),d=b.WindowProxy.getTargetWindow(c.targetWindowName),e=b.WindowProxyDispatcher.findWindowProxyObjectInWindow(d,c.sourceWindowName),e?e.origin===c.targetOrigin||"*"===c.targetOrigin?e.dispatchEvent(new b.MessageEvent(c.data,c.sourceOrigin,e)):b.error("Target origin "+e.origin+" does not match desired target of "+c.targetOrigin):b.error("Could not find window proxy object on the target window"))},findWindowProxyObjectInWindow:function(a,b){var c;if(a.RuntimeObject&&(a=a.RuntimeObject()),a)for(c in a)if(a.hasOwnProperty(c))try{if(null!==a[c]&&"object"==typeof a[c]&&a[c]instanceof a.Porthole.WindowProxy&&a[c].getTargetWindowName()===b)return a[c]}catch(d){}return null},start:function(){a.addEventListener?a.addEventListener("resize",b.WindowProxyDispatcher.forwardMessageEvent,!1):document.body.attachEvent?a.attachEvent("onresize",b.WindowProxyDispatcher.forwardMessageEvent):b.error("Cannot attach resize event")}},"undefined"!=typeof a.exports?a.exports.Porthole=b:a.Porthole=b}(this);;var TAWEA_DOMAIN = '//tawea.com';;window.top==window&&!function(){if(null==window.tawEx){window.tawEx=!0;var a={toolbarWidth:229,chatBoxWidth:260,chatBoxHeight:290,publicChatVars:"",debug:!1,scrolling:!0,Objects:{TawDrag:{},Iframe:{Constants:{dropStyle:{height:"100%",width:"100%",top:"0",left:"0",position:"absolute"},debugButtonStyle:{backgroundColor:"rgba(0,0,0,0.7)",color:"rgb(197,197,197)",padding:"2px 5px",opacity:"0.5",cursor:"pointer",position:"relative","float":"left",cssFloat:"left",marginRight:"2px",marginTop:"2px",fontFamily:"'lucida grande',tahoma,verdana,arial,sans-serif",fontSize:"12px",lineHeight:"1.2"}},Functions:{init:function(){this.view.container.element=document.createElement("div"),this.view.iframe.element=document.createElement("iframe"),this.view.dropLayer=document.createElement("div"),this.view.dropShow=document.createElement("div");var b=this.view.container.element,c=this.view.dropLayer,d=this.view.dropShow,e=this.view.iframe.element;b.className="Tawea",b.style.zIndex=this.view.zIndex,e.id=this.model.id,e.src=this.model.src,e.name=this.model.id,e.setAttribute("TaweaIgnore",!0);var f=this.view.container.data,g=this.view.iframe.data;for(var h in f)b.style[h]=f[h];for(var h in g)e[h]=g[h],e.style[h]=g[h];this.view.proxy=new Porthole.WindowProxy(this.model.src,this.model.id),this.eventOnPrivateMessage=this.onPrivateMessage.bind(this),this.view.proxy.addEventListener(this.eventOnPrivateMessage);var i=a.Objects.Iframe.Constants.dropStyle;for(var h in i)c.style[h]=i[h],d.style[h]=i[h];d.style.display="none",c.style.backgroundColor="rgba(0,0,0,0)",this.view.debug=document.createElement("div"),this.view.debugButton=document.createElement("div"),this.view.postMessageButton=document.createElement("div"),this.view.brotherhoodButton=document.createElement("div");var j=this.view.debug,k=this.view.debugButton,l=this.view.postMessageButton,m=this.view.brotherhoodButton;if(a.debug){k.innerHTML="Worker",k.title="Debug worker messages from this iframe",l.innerHTML="Tab",l.title="Debug postmessage messages from this iframe",m.innerHTML="Brethren",m.title="Debug postmessage messages from this iframe";var n={height:"18px",top:"-18px",left:"0",position:"absolute"};for(var h in n)j.style[h]=n[h];var o=a.Objects.Iframe.Constants.debugButtonStyle;for(var h in o)k.style[h]=o[h],l.style[h]=o[h],m.style[h]=o[h];a.Objects.Iframe.addDebugListeners.call(this),j.appendChild(k),j.appendChild(l),j.appendChild(m),b.appendChild(j)}a.Objects.Iframe.addListeners.call(this),window.addEventListener("dragstart",function(a){this.isDropping=!1,this.dragEvent(a),this.eventElement=a.target,this.temporalEvent=this.dragEventEnd.bind(this),this.eventElement.addEventListener("dragend",this.temporalEvent,!1)}.bind(this),!1),b.appendChild(e),b.appendChild(d),b.appendChild(c),this.view.parent.appendChild(b)}},Events:{Debug:{opacity:function(a,b){a.style.opacity=b},mouseout:function(){this.view.postMessageButton.style.opacity="0.5",this.view.debugButton.style.opacity="0.5",this.view.brotherhoodButton.style.opacity="0.5"}},iframe:{mouseOut:function(b){b.preventDefault(),a.scrolling=!0,this.showDiv(this.view.dropLayer,!0),this.iframeOver(!1)}},dropLayer:{mouseover:function(b){b.preventDefault(),a.scrolling=!1,this.showDiv(this.view.dropLayer,!1),this.iframeOver(!0)},dragLeave:function(a){this.showDiv(this.view.dropShow,!1),this.dragEvent(a)},dragOver:function(b){if(b.preventDefault&&b.preventDefault(),this.showDiv(this.view.dropShow,!0),b.dataTransfer.effectAllowed="all",b.dataTransfer.dropEffect="copy",b.layerY%2==0||b.layerX%4==0){var c,d;if(null!=b.offsetX)c=b.offsetX,d=b.offsetY;else{var e=a.Instances.taws.elementBounds(this.view.dropShow);c=b.clientX-e.left,d=b.clientY-e.top}this.dragEvent(b,{x:c,y:d})}return!1},drop:function(a){return a.stopPropagation(),a.preventDefault(),this.isDropping=!0,this.dropAction(a.dataTransfer),this.showDiv(this.view.dropShow,!1),this.showDiv(this.view.dropLayer,!1),!1},dragEnd:function(a){this.showDiv(this.view.dropShow,!1),this.isDropping||this.dragEvent(a)}}},addListeners:function(){var b=this.view.dropLayer;this.iframeMouseOut=a.Objects.Iframe.Events.iframe.mouseOut.bind(this),this.dropMouseOver=a.Objects.Iframe.Events.dropLayer.mouseover.bind(this),this.dropLayerDragLeave=a.Objects.Iframe.Events.dropLayer.dragLeave.bind(this),this.dropLayerDragOver=a.Objects.Iframe.Events.dropLayer.dragOver.bind(this),this.dropLayerDrop=a.Objects.Iframe.Events.dropLayer.drop.bind(this),this.dropLayerDragEnd=a.Objects.Iframe.Events.dropLayer.dragEnd.bind(this),this.view.iframe.element.addEventListener("mouseout",this.iframeMouseOut,!1),b.addEventListener("mouseover",this.dropMouseOver,!1),b.addEventListener("dragleave",this.dropLayerDragLeave,!1),b.addEventListener("dragover",this.dropLayerDragOver,!1),b.addEventListener("drop",this.dropLayerDrop,!1),b.addEventListener("dragend",this.dropLayerDragEnd,!1)},removeListeners:function(){var a=this.view.dropLayer;this.view.iframe.element.removeEventListener("mouseout",this.iframeMouseOut,!1),a.removeEventListener("mouseover",this.dropMouseOver,!1),a.removeEventListener("dragleave",this.dropLayerDragLeave,!1),a.removeEventListener("dragover",this.dropLayerDragOver,!1),a.removeEventListener("drop",this.dropLayerDrop,!1),a.removeEventListener("dragend",this.dropLayerDragEnd,!1)},addDebugListeners:function(){var b=this.view.debugButton,c=this.view.postMessageButton,d=this.view.brotherhoodButton;this.debugButtonClick=this.debugWorker.bind(this,"Worker"),this.postMessageButtonClick=this.debugWorker.bind(this,"PostMessage"),this.brotherhoodButtonClick=this.debugWorker.bind(this,"Brotherhood"),this.debugButtonMouseOut=a.Objects.Iframe.Events.Debug.opacity.bind(this,this.view.debugButton,"0.5"),this.debugButtonMouseOver=a.Objects.Iframe.Events.Debug.opacity.bind(this,this.view.debugButton,"1"),this.postMessageButtonMouseOut=a.Objects.Iframe.Events.Debug.opacity.bind(this,this.view.postMessageButton,"0.5"),this.postMessageButtonMouseOver=a.Objects.Iframe.Events.Debug.opacity.bind(this,this.view.postMessageButton,"1"),this.brotherhoodButtonMouseOut=a.Objects.Iframe.Events.Debug.opacity.bind(this,this.view.brotherhoodButton,"0.5"),this.brotherhoodButtonMouseOver=a.Objects.Iframe.Events.Debug.opacity.bind(this,this.view.brotherhoodButton,"1"),this.debugMouseOut=a.Objects.Iframe.Events.Debug.mouseout.bind(this),b.addEventListener("click",this.debugButtonClick,!1),c.addEventListener("click",this.postMessageButtonClick,!1),d.addEventListener("click",this.brotherhoodButtonClick,!1),b.addEventListener("mouseout",this.debugButtonMouseOut,!1),b.addEventListener("mouseover",this.debugButtonMouseOver,!1),c.addEventListener("mouseout",this.postMessageButtonMouseOut,!1),c.addEventListener("mouseover",this.postMessageButtonMouseOver,!1),d.addEventListener("mouseout",this.brotherhoodButtonMouseOut,!1),d.addEventListener("mouseover",this.brotherhoodButtonMouseOver,!1),this.view.debug.addEventListener("mouseout",this.debugMouseOut,!1)},removeDebugListeners:function(){var a=this.view.debugButton,b=this.view.postMessageButton,c=this.view.brotherhoodButton;a.removeEventListener("click",this.debugButtonClick,!1),b.removeEventListener("click",this.postMessageButtonClick,!1),c.removeEventListener("click",this.brotherhoodButtonClick,!1),a.removeEventListener("mouseout",this.debugButtonMouseOut,!1),a.removeEventListener("mouseout",this.debugButtonMouseOut,!1),b.removeEventListener("mouseout",this.postMessageButtonMouseOut,!1),b.removeEventListener("mouseover",this.postMessageButtonMouseOver,!1),c.removeEventListener("mouseout",this.brotherhoodButtonMouseOut,!1),c.removeEventListener("mouseover",this.brotherhoodButtonMouseOver,!1),this.view.debug.removeEventListener("mouseout",this.debugMouseOut,!1)}}},Iframe:function(b,c,d){this.model={id:c+"_"+b,type:c,src:TAWEA_DOMAIN+"/extension/"+c+"?url="+encodeURIComponent(document.location)+"&title="+(encodeURIComponent(document.title)||"undefined")+a.publicChatVars+(d||"")},this.view={visible:!0,proxy:null,container:{element:null,data:{position:"fixed",width:"0px",height:"0px",top:"0",right:"0",overflow:"hidden",display:"none"}},iframe:{element:null,data:{width:"100%",height:"100%",position:"absolute",top:"0",left:"0",border:"0px",background:"transparent",scrolling:"no"}},zIndex:"2147483646",parent:document.body,dropLayer:null,dropShow:null},this.iframeOver=function(a){var b={event:"iframe.over",data:{over:a}};this.send(b)},this.dragEventEnd=function(a){console.log("DRAGEND"),this.dragEvent(a),this.eventElement.removeEventListener(a.type,this.temporalEvent,!1)},this.onPrivateMessage=function(a){this.onMessage(JSON.parse(a.data))},this.send=function(a){this.view.proxy.post(JSON.stringify(a))},this.show=function(){this.view.visible=!0,this.view.container.element.style.display="block",this.resizeDebug()},this.close=function(){this.view.container.element.parentElement.removeChild(this.view.container.element),this.view.proxy.removeEventListener(this.eventOnPrivateMessage,!1),a.Objects.Iframe.removeListeners.call(this),a.Objects.Iframe.removeDebugListeners.call(this),delete this.view.proxy},this.hide=function(){this.view.visible=!1,this.view.container.element.style.display="none"},this.setBounds=function(a){for(var b in a)this.view.container.element.style[b]=a[b];this.resizeDebug(),window.setTimeout(function(){this.resizeDebug()}.bind(this),300)},this.resizeDebug=function(){a.debug&&(this.view.debug.style.top="-"+Math.max(18,this.view.debug.scrollHeight)+"px")},this.showDiv=function(a,b){var c="none";b&&(c="block"),a.style.display=c},this.dragEvent=function(a,b){var c={event:"drag.event",data:{type:a.type}};null!=b&&(c.data.coordinates=b),this.send(c)},this.debugWorker=function(a){var b={event:"console.open",data:{type:a}};this.send(b)}},Iframes:{Toolbar:function(){a.debug=TAWEA_DOMAIN.length>21;var b="%cChat powered by:\n%cTawea";a.debug&&(b+=" Development"),console.log(b,"font-size:1em;color:#008db1;padding:0 0.2em","font-size:3em;color:white;background:#008db1;padding:0 0.2em");var c="";if("undefined"!=typeof _taw&&_taw.hasOwnProperty("length"))for(var d={appId:null,room:null,name:null,color:null,userToken:null},e=0;e<_taw.length;e++)for(var f in d)_taw[e][0]=="_"+f&&(d[f]=_taw[e][1]);for(var f in d)null!=d[f]&&(c+="&"+f.toLowerCase()+"="+encodeURIComponent(d[f]));a.publicChatVars=c,a.Iframe.call(this,"Toolbar","toolbar",""),this.view.container.data={position:"fixed",width:a.toolbarWidth+"px",height:"0",bottom:"0",right:"0",maxHeight:window.innerHeight+"px",display:"none",zIndex:"2147483645",webkitTransition:"all 0.3s ease",MozTransition:"all 0.3s ease",oTransition:"all 0.3s ease",msTransition:"all 0.3s ease","-webkit-box-shadow":"0 1px 1px rgba(0, 0, 0, .3)","box-shadow":"0px 1px 1px rgba(0, 0, 0, 0.3)"},null!=document.body&&(this.isInitialized=!0,this.initTawea(),this.view.parent=a.Instances.chatboxes.container,a.Objects.Iframe.Functions.init.call(this)),document.addEventListener("DOMContentLoaded",function(){this.isInitialized||(this.initTawea(),this.view.parent=a.Instances.chatboxes.container,a.Objects.Iframe.Functions.init.call(this),console.log("Not so fast, my friend."))}.bind(this),!1),window.addEventListener("mousewheel",function(a){this.mouseScroll(a)}.bind(this),!1),window.addEventListener("DOMMouseScroll",function(a){this.mouseScroll(a)}.bind(this),!1),document.addEventListener("load",function(){a.Instances.taws.analizeDrag()}.bind(this),!1),this.mouseScroll=function(b){!a.scrolling&&b.stopPropagation&&(b.stopPropagation(),b.preventDefault())},this.onResize=function(a){this.view.container.element.style.maxHeight=a+"px",this.view.iframe.element.style.maxHeight=a+"px"}},Chatbox:function(b,c,d,e,f){var g="&id="+b+"&type="+f;"undefined"!=typeof d&&d&&(g+="&focus=true"),a.Iframe.call(this,b,"chatbox",g),this.view.parent=a.Instances.chatboxes.container,this.view.container.data={width:a.chatBoxWidth+"px",height:a.chatBoxHeight+"px",position:"relative","float":"right",marginTop:"-289px",marginRight:"9px",webkitTransition:"all 0.3s ease",MozTransition:"all 0.3s ease",oTransition:"all 0.3s ease",msTransition:"all 0.3s ease",display:"block",display:"none",cssFloat:"right",zIndex:"2147483644","-webkit-box-shadow":"0 1px 1px rgba(0, 0, 0, .3)","box-shadow":"0px 1px 1px rgba(0, 0, 0, 0.3)"},"web"==f&&(this.view.container.data["float"]="left",this.view.container.data.cssFloat="left"),c||(this.view.container.data.width="160px",this.view.container.data.marginTop=e?"-3px":"-28px"),a.Objects.Iframe.Functions.init.call(this),this.onResize=function(b){parseInt(this.view.container.element.style.width)>a.chatBoxWidth-1&&(this.view.iframe.element.style.maxHeight=b+"px",this.view.container.element.style.marginTop=b<a.chatBoxHeight?-1*b+1+"px":-1*a.chatBoxHeight+1+"px")}},Popup:function(){a.Iframe.call(this,Math.floor(1e9*Math.random()+1),"popup",""),a.Objects.Iframe.Functions.init.call(this)},Taw:function(b,c){a.Iframe.call(this,b,"taw",""),this.view.parent=a.Instances.chatboxes.container,this.view.container.data={width:"100%",height:"100%",position:"fixed",top:"0",left:"0",display:"none",zIndex:"2147483645"};var d="/";"/"==c[c.length-1]&&(d=""),this.model.src=c+d+"embed",a.Objects.Iframe.Functions.init.call(this),this.view.debug.style.top="0"}},Set:function(){this.instances={},this.instancesCount=0,this.positions=[],this.container=null,this.add=function(a){this.instances.hasOwnProperty(a.model.id)||(this.instances[a.model.id]=a,this.positions.push(a),this.instancesCount++)},this.remove=function(a){this.removeById(a.model.id)},this.removeById=function(a){if(this.instances.hasOwnProperty(a)){delete this.instances[a];for(var b=0;b<this.positions.length;b++)this.positions[b].model.id==a&&this.positions.splice(b,1);this.instancesCount--}},this.show=function(a){this.instances[a].show()},this.hide=function(a){this.instances[a].hide()},this.close=function(){this.container.parentElement.removeChild(this.container),this.container=null}},Sets:{Chatboxes:function(){a.Set.call(this),this.container=document.createElement("div");var b={position:"fixed",bottom:"1px",left:"0",width:"100%",height:"0px",zIndex:"2147483647",className:"Tawea"};for(var c in b)this.container.style[c]=b[c];this.offsetDiv=document.createElement("div"),b={width:a.toolbarWidth+"px",height:"290px",position:"relative","float":"right",marginTop:"-1px",cssFloat:"right",cssFloat:"right",webkitTransition:"all 0.3s ease",MozTransition:"all 0.3s ease",oTransition:"all 0.3s ease",msTransition:"all 0.3s ease"};for(var c in b)this.offsetDiv.style[c]=b[c];this.container.appendChild(this.offsetDiv),document.body.appendChild(this.container)},Popups:function(){a.Set.call(this),this.addPopup=function(){this.add(new a.Iframes.Popup)}},Taws:function(){a.Set.call(this),this.dragElements=[],this.isVisible=!1,this.lastTaw=null,this.addTaw=function(b){null!=this.lastTaw&&(this.lastTaw.close(),this.removeById(this.lastTaw.model.id));var c=new a.Iframes.Taw(b.id,b.url);this.add(c),this.lastTaw=c},this.tawsTypes={img:"IMG",video:"VIDEO",video_HTML5:"VIDEO_HTML5",iframe:"IFRAME"},this.regex={youtube:{url:/^(http|https):\/\/www.youtube.com/,id:function(a){var b=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,c=a.match(b);return this.offset=a!=window.location.toString()&&a.toLowerCase().indexOf("showinfo=0")<0?{x:5,y:35}:null,c&&11==c[7].length?c[7]:window.hasOwnProperty("yt")?yt.config_.VIDEO_ID:null}},vimeo:{url:/^(http|https):\/\/(vimeo.com|player.vimeo.com)/,id:function(a){var b=a.match(/^.*(vimeo.com\/)(.*\/)?([^#\?]*)/);return b?b[3]||b[1]:null}},dailymotion:{url:/^(http|https):\/\/www.dailymotion.com/,id:function(a){var b=a.match(/^.+dailymotion.com\/(video|hub|embed\/video)\/([^_]+)[^#]*(#video=([^_&]+))?/);return null!==b?void 0!==b[4]?b[4]:b[2]:null}}},this.videos={url:{youtube:"youtube",vimeo:"vimeo"},elements:{iframe:"iframe",object:"object",embed:"embed",video:"video"}},this.contStyle={position:"absolute",top:"35px",left:"0",draggable:"true",zIndex:"2147483647",padding:"0",margin:"0",visibility:"hidden"},this.imgStyle={width:"30px",height:"30px",opacity:"0.6",cursor:"pointer",backgroundColor:"rgba(0,0,0,0.1)","float":"left"},this.tipStyle={position:"absolute",top:"0",left:"0",backgroundColor:"rgba(0,0,0,0.6)",height:"30px",padding:"0 6px",marginLeft:"40px","float":"left",display:"none",whiteSpace:"nowrap",color:"white",fontFamily:"'lucida grande',tahoma,verdana,arial,sans-serif",fontSize:"9px",lineHeight:"3"},this.arrowStyle={width:"0",height:"0",borderTop:"6px solid transparent",borderBottom:"6px solid transparent",borderRight:"6px solid rgba(0,0,0,0.6)",position:"absolute",left:"0",top:"0",margin:"9px 0 0 34px",display:"none"}}},iframe:function(){},set:function(){},setProto:function(a,b,c){a.prototype=b,a.prototype.constructor=a,a.prototype._super=c},setProtoIframe:function(b){this.setProto(b,new a.iframe,a.Iframe.prototype)},setProtoSet:function(b){this.setProto(b,new a.set,a.Set.prototype)},Instances:{}};a.Iframe.prototype.dropAction=function(){},a.Iframe.prototype.onMessage=function(a,b){if("iframe.visibility"==a.event)"visible"==a.data.visibility||1==a.data.visibility?b.show():b.hide();else if("iframe.bounds"==a.event)b.setBounds(a.data.bounds);else if("iframe.close"==a.event)b.close();else if("iframe.dock"==a.event){var c=document.getElementsByTagName("html")[0];for(var d in a.data.parentBounds)c.style[d]=a.data.parentBounds[d];b.setBounds(a.data.iframeBounds)}},a.iframe.prototype=a.Iframe.prototype,a.set.prototype=a.Set.prototype;for(var b in a.Iframes)a.setProtoIframe(a.Iframes[b]);for(var b in a.Sets)a.setProtoSet(a.Sets[b]);if(a.Iframes.Toolbar.prototype.onMessage=function(b){if(this._super.onMessage(b,this),"tawea.init"==b.event){if(a.Instances.taws.analizeDrag(),a.Instances.chatboxes.instancesCount<1)for(var c=0;c<b.data.boxesStatus.length;c++)a.Instances.chatboxes.add(new a.Iframes.Chatbox(b.data.boxesStatus[c].id,b.data.boxesStatus[c].status,!1,b.data.autoHide,"friend"))}else if("chat.box.open"==b.event)a.Instances.chatboxes.add(new a.Iframes.Chatbox(b.data.id,!0,b.data.focus,!1,"friend"));else if("user.login"==b.event)this.login();else if("iframe.visibility"==b.event)a.Instances.taws.changeVisibility(b.data.visibility);else if("iframe.bounds"==b.event){var d={width:"width","float":"float",cssFloat:"cssFloat"};for(var c in d)b.data.bounds.hasOwnProperty(c)&&(a.Instances.chatboxes.offsetDiv.style[c]=b.data.bounds[c])}else"chat.box.web.open"==b.event&&a.Instances.chatboxes.add(new a.Iframes.Chatbox(b.data.id,b.data.status,b.data.focus,b.data.autoHide,"web"))},a.Iframes.Toolbar.prototype.dropAction=function(b){this._super.dropAction(b,this),a.Instances.taws.tawDrop(b,this)},a.Iframes.Toolbar.prototype.initTawea=function(){a.Instances.chatboxes=new a.Sets.Chatboxes,a.Instances.taws=new a.Sets.Taws,a.Instances.popups=new a.Sets.Popups,a.Instances.taws.analizeDrag()},a.Sets.Taws.prototype.tawFix=function(){},a.Sets.Taws.prototype.newItem=function(a,b){return{type:a,value:b}},a.Sets.Taws.prototype.tawDrop=function(b,c){console.log("TAWDROP en Taws");var d,e=[];null!=c.eventElement.attributes&&(d=c.eventElement.getAttribute("data-type"));var f;if(f=c.eventElement.nodeName,null!=d&&d.indexOf("taw_tawea_")>=0){var g=document.getElementById(c.eventElement.getAttribute("data-id"));if(f=c.eventElement.getAttribute("data-element"),f==a.Instances.taws.tawsTypes.video)e.push(this.newItem("text/html",g.outerHTML));else if(f==a.Instances.taws.tawsTypes.video_HTML5){e.push(this.newItem("text/html",g.outerHTML));var h=g.getElementsByTagName("video")[0];null==h&&(h=g);var i=h.getAttribute("src");null!=i&&e.push(this.newItem("src",i));var j=h.getAttribute("poster");null!=j&&e.push(this.newItem("poster",j));for(var k=g.getElementsByTagName("source"),l=[],m=0;m<k.length;m++){for(var n={},o=0;o<k[m].attributes.length;o++)n[k[m].attributes[o].nodeName]=k[m].attributes[o].nodeValue;l.push(n)}e.push(this.newItem("sources",l))}else{var p=c.eventElement.getAttribute("data-idVideo");e.push(this.newItem("text/plain",p)),e.push(this.newItem("text/uri-list",g.src))}}else if(c.eventElement.nodeName==a.Instances.taws.tawsTypes.img){var q="text/plain";b.types.length>2?e.push(this.newItem(q,b.getData(q))):e.push(this.newItem(q,"")),e.push(this.newItem("text/uri-list",c.eventElement.src)),e.push(this.newItem("text/html",c.eventElement.outerHTML.replace(/\"/g,"'")));var r=c.eventElement.getAttribute("alt");r&&e.push(this.newItem("data",{alt:r}))}else for(var m in b.types)e.push(this.newItem(b.types[m],b.getData(b.types[m]).replace(/\"/g,"'")));c.send(this.sendTaw(f,e))},a.Sets.Taws.prototype.sendTaw=function(a,b){var c={event:"taw.drop",data:{origin:window.location.toString(),nodeName:a.toLowerCase(),data:b}};return c},a.Sets.Taws.prototype.elementBounds=function(a){return a.getBoundingClientRect()},a.Sets.Taws.prototype.analizeDrag=function(){this.tawFix(),window.addEventListener("DOMNodeInserted",function(a){null!=a.srcElement&&this.newDrag(a.srcElement)}.bind(this),!1);for(var a in this.videos.elements)for(var b,c=document.getElementsByTagName(a),d=0;d<c.length;d++)b=c[d],null!=b&&this.newDrag(b)},a.Sets.Taws.prototype.newDrag=function(a){if(a.childElementCount>0)for(var b=0;b<a.childNodes.length;b++)null!=a.childNodes[b]&&this.newDrag(a.childNodes[b]);var c=a.nodeName.toLowerCase();if(this.videos.elements.hasOwnProperty(c)){var d=!1;if(a.childElementCount>0)for(var e=0;e<a.childElementCount;e++)if(this.videos.elements.hasOwnProperty(a.childNodes[e].nodeName)){d=!0;break}a.getAttribute("tawea_share")&&(d=!0),d||a.getAttribute("TaweaIgnore")||this.dragElements.push(new this.TawDrag(a,c,c+"_"+Math.floor(1e9*Math.random()+1),this.contStyle,this.imgStyle,this.tipStyle,this.arrowStyle,this.regex,this.isVisible))}},a.Sets.Taws.prototype.removeDrag=function(){for(var a in this.dragElements)this.dragElements[a].close();this.dragElements=[]},a.Sets.Taws.prototype.changeVisibility=function(a){if("visible"==a||1==a){this.isVisible=!0;for(var b=0;b<this.dragElements.length;b++)this.dragElements[b].show()}else{this.isVisible=!1;for(var b=0;b<this.dragElements.length;b++)this.dragElements[b].hide()}},a.Objects.TawDrag={Constants:{},Functions:{init:function(b,c,d,e,f){this.container=document.createElement("div"),this.dragElement=document.createElement("img"),this.dragElement.src=TAWEA_DOMAIN+"/extension/img/icons/tawea_share.png",this.dragCont=document.createElement("div"),this.dragCont.setAttribute("draggable","true"),this.dragCont.appendChild(this.dragElement),this.tip=document.createElement("div"),this.arrow=document.createElement("div"),this.tip.innerHTML="Drag me to share this video";for(var g in b)this.container.style[g]=b[g];for(var g in c)this.dragCont.style[g]=c[g];for(var g in d)this.tip.style[g]=d[g];for(var g in e)this.arrow.style[g]=e[g];this.selectEvent=this.onParentOver()?this.video.parentElement:this.video,this.onResize(),null==this.video.getAttribute("id")&&this.video.setAttribute("id","taw_tawea_"+this.id),this.setAttribute("data-id",this.video.id),this.setAttribute("data-type","taw_tawea_"+this.type),this.videoType="video"==this.type?a.Instances.taws.tawsTypes.video_HTML5:a.Instances.taws.tawsTypes.video,this.setAttribute("data-element",this.videoType),this.video.setAttribute("tawea_share",!0),f?this.show():this.hide();var h=this.video.getAttribute("data");null!=h&&a.Objects.TawDrag.Functions.checkSrc.call(this,h),null!=this.video.getAttribute("src")&&a.Objects.TawDrag.Functions.checkSrc.call(this,this.video.src),a.Objects.TawDrag.Functions.checkSrc.call(this,window.location.toString()),this.videoType!=a.Instances.taws.tawsTypes.video?(a.Objects.TawDrag.addEvents.call(this),this.container.appendChild(this.dragCont),this.container.appendChild(this.arrow),this.container.appendChild(this.tip),document.body.appendChild(this.container)):delete this},checkSrc:function(b){for(var c in this.regex)if(b.match(this.regex[c].url)){var d=this.regex[c].id(b);d&&((b!=window.location.toString()||b==window.location.toString()&&this.type!=a.Instances.taws.tawsTypes.iframe.toLowerCase())&&(this.videoType=c.toUpperCase()),this.setAttribute("data-idVideo",d),this.setAttribute("data-element",this.videoType),null!=this.regex[c].offset&&(this.offset=this.regex[c].offset))}}},Events:{overDrag:function(){this.dragCont.style.opacity="1",this.tip.style.display="block",this.arrow.style.display="block"},outDrag:function(){this.dragCont.style.opacity="0.6",this.tip.style.display="none",this.arrow.style.display="none"},over:function(){this.container.style.visibility="visible",this.onResize()},out:function(){this.container.style.visibility="hidden"}},addEvents:function(){this.overDrag=a.Objects.TawDrag.Events.overDrag.bind(this),this.outDrag=a.Objects.TawDrag.Events.outDrag.bind(this),this.over=a.Objects.TawDrag.Events.over.bind(this),this.out=a.Objects.TawDrag.Events.out.bind(this),this.selectEvent.addEventListener("mouseover",this.over,!1),this.selectEvent.addEventListener("mouseout",this.out,!1),this.container.addEventListener("mouseover",this.over,!1),this.container.addEventListener("mouseout",this.out,!1),this.dragElement.addEventListener("mouseover",this.overDrag,!1),this.dragElement.addEventListener("mouseout",this.outDrag,!1)},removeEvents:function(){this.selectEvent.removeEventListener("mouseover",this.over,!1),this.selectEvent.removeEventListener("mouseout",this.out,!1),this.container.removeEventListener("mouseover",this.over,!1),this.container.removeEventListener("mouseout",this.out,!1),this.dragElement.removeEventListener("mouseover",this.overDrag,!1),this.dragElement.removeEventListener("mouseout",this.outDrag,!1)}},a.Sets.Taws.prototype.TawDrag=function(b,c,d,e,f,g,h,i,j){this.video=b,this.type=c,this.id=d,this.regex=i,this.dragElement=null,this.dragCont=null,this.selectEvent=null,this.container=null,this.tip=null,this.arrow=null,this.offset={x:5,y:5},this.setAttribute=function(a,b){this.dragElement.setAttribute(a,b),this.dragCont.setAttribute(a,b)},this.onParentOver=function(){var a=window.location.toString().match(this.regex.youtube.url);return a||"video"==this.type?!0:!1},this.close=function(){a.Objects.TawDrag.removeEvents.call(this),document.body.removeChild(this.container),delete this},this.show=function(){this.container.style.display="block"},this.hide=function(){this.container.style.display="none"},this.onResize=function(){var b=a.Instances.taws.elementBounds(this.video);(0==b.height||0==b.width)&&(b=a.Instances.taws.elementBounds(this.video.parentElement));var c=this.offset.y+b.top+document.body.scrollTop,d=this.offset.x+b.left+document.body.scrollLeft;this.container.style.left=d+"px",this.container.style.top=c+"px"},a.Objects.TawDrag.Functions.init.call(this,e,f,g,h,j)},a.Iframes.Chatbox.prototype.onMessage=function(b){this._super.onMessage(b,this),"chat.box.close"==b.event?(this.close(),a.scrolling=!0,a.Instances.chatboxes.removeById(this.model.id)):"taw.open"==b.event&&a.Instances.taws.addTaw(b.data)},a.Iframes.Chatbox.prototype.dropAction=function(b){this._super.dropAction(b,this),a.Instances.taws.tawDrop(b,this)},a.Sets.Chatboxes.prototype.create=function(b){var c=new a.Iframes.Chatbox(b);this.add(c)},a.Iframes.Popup.prototype.onMessage=function(b){this._super.onMessage(b,this),"iframe.close"==b.event&&a.Instances.popups.removeById(this.model.id)},a.Iframes.Taw.prototype.onMessage=function(b){if(this._super.onMessage(b,this),"iframe.close"==b.event)a.Instances.taws.removeById(this.model.id),a.Instances.taws.lastTaw=null;else if("taw.move"==b.event){var c=a.Instances.chatboxes,d=b.data.x,e=b.data.y;if(c.instancesCount>0)for(var f in c.instances)this.isIframe(c.instances[f].view.container.element,d,e);this.isIframe(a.Instances.toolbar.view.container.element,d,e)}},a.Iframes.Taw.prototype.isIframe=function(b,c,d){var e=a.Instances.taws.elementBounds(b);b.style.zIndex=c>e.left&&c<e.left+e.width&&d>e.top&&d<e.top+e.height?"2147483646":"2147483644"},!window.isPopup&&top==self){var c=window.location.pathname;c&&"/extension/report"==c||(a.Instances.toolbar=new a.Iframes.Toolbar)}a.debug&&(window.TaweaController=a)}}();